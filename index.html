<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>SISTEMA C.R.I.S. // CENTRAL D.E.R.</title>
    <style>
        :root { --green: #33ff66; --blue: #3399ff; --purple: #a033ff; --orange: #ff9933; --red: #ff3333; }
        body { background: #050505; color: #eee; font-family: 'Courier New', monospace; margin: 0; }
        
        /* Navegação */
        nav { background: #000; border-bottom: 2px solid var(--green); padding: 15px; display: none; justify-content: center; position: sticky; top: 0; z-index: 100; }
        nav button { background: none; border: 1px solid #333; color: #888; padding: 10px 15px; cursor: pointer; margin: 0 5px; font-weight: bold; font-size: 0.8rem; }
        nav button.active { color: var(--green); border-color: var(--green); box-shadow: 0 0 10px var(--green); }

        .container { max-width: 900px; margin: 20px auto; padding: 10px; }
        .aba { display: none; background: #111; border: 1px solid #222; padding: 20px; }
        .aba.active { display: block; }

        /* Tela Inicial */
        #tela-inicial { text-align: center; padding: 50px 20px; }
        .lista-agentes { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 20px; margin-top: 30px; }
        .card-agente { background: #111; border: 1px solid var(--green); padding: 20px; cursor: pointer; transition: 0.3s; position: relative; }
        .card-agente:hover { background: #1a1a1a; box-shadow: 0 0 15px var(--green); }
        .btn-novo { background: var(--green); color: #000; padding: 15px 30px; border: none; font-weight: bold; cursor: pointer; margin-top: 20px; }

        /* Elementos da Ficha */
        h2 { color: var(--green); border-bottom: 1px solid #333; padding-bottom: 5px; text-transform: uppercase; font-size: 1.1rem; margin-top: 25px; }
        label { display: block; color: var(--green); font-size: 0.75rem; margin: 10px 0 5px 0; font-weight: bold; }
        input, select, textarea { background: #000; color: #fff; border: 1px solid #444; padding: 10px; width: 100%; box-sizing: border-box; margin-bottom: 10px; font-family: monospace; }
        
        #desc-classe { background: #080808; padding: 15px; border-left: 4px solid var(--green); color: #bbb; font-size: 0.85rem; margin-bottom: 20px; min-height: 40px; }

        /* Perícias */
        .pericia-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
        .pericia-item { display: flex; justify-content: space-between; align-items: center; background: #0a0a0a; padding: 6px 10px; border: 1px solid #222; font-size: 0.8rem; }
        .sel-p { background: #111; border: 1px solid #444; color: #666; width: 55px; text-align: center; cursor: pointer; font-weight: bold; }
        
        .p5 { color: var(--green) !important; border-color: var(--green) !important; }
        .p10 { color: var(--blue) !important; border-color: var(--blue) !important; }
        .p15 { color: var(--purple) !important; border-color: var(--purple) !important; }
        .p20 { color: var(--orange) !important; border-color: var(--orange) !important; }

        /* Inventário e Ressonâncias */
        .item-row { display: flex; justify-content: space-between; background: #0a0a0a; padding: 10px; border: 1px solid #222; margin-bottom: 5px; align-items: center; }
        .btn-del { background: var(--red); color: white; border: none; padding: 5px 10px; cursor: pointer; font-size: 0.7rem; }
        .form-add { background: #1a1a1a; padding: 15px; border: 1px dashed var(--green); margin-bottom: 20px; }
    </style>
</head>
<body>

    <section id="tela-inicial" class="container">
        <h1 style="color: var(--green); letter-spacing: 5px; text-shadow: 0 0 10px var(--green);">SISTEMA C.R.I.S.</h1>
        <p>CONEXÃO REMOTA DE INFORMAÇÕES SIGILOSAS // D.E.R.</p>
        <div id="lista-agentes" class="lista-agentes"></div>
        <button class="btn-novo" onclick="novoAgente()">+ RECRUTAR NOVO AGENTE</button>
    </section>

    <nav id="nav-principal">
        <button onclick="voltarInicio()">← TERMINAL</button>
        <button id="nav-fic" class="active" onclick="trocarAba('ficha')">FICHA</button>
        <button id="nav-inv" onclick="trocarAba('inventario')">INVENTÁRIO</button>
        <button id="nav-res" onclick="trocarAba('ressonancias')">RESSONÂNCIAS</button>
    </nav>

    <div class="container" id="area-agente" style="display:none;">
        
        <div id="aba-ficha" class="aba active">
            <h2>DADOS IDENTIFICATÓRIOS</h2>
            <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 15px;">
                <div>
                    <label>CODINOME DO AGENTE</label>
                    <input type="text" id="agente-nome" oninput="salvarTudo()">
                </div>
                <div>
                    <label>N.E.R. (EXPOSIÇÃO)</label>
                    <select id="agente-ner" onchange="salvarTudo()">
                        <option value="5">05%</option><option value="10">10%</option><option value="20">20%</option>
                        <option value="35">35%</option><option value="50">50%</option><option value="65">65%</option>
                        <option value="80">80%</option><option value="99">99%</option>
                    </select>
                </div>
            </div>

            <label>ESPECIALIZAÇÃO OPERACIONAL</label>
            <select id="agente-classe" onchange="atualizarDescricao(); salvarTudo();">
                <option value="">Selecione...</option>
                <option value="tatico">Tático de Assalto</option>
                <option value="sintonizador">Sintonizador de Echo</option>
                <option value="especialista">Especialista Técnico</option>
            </select>
            <div id="desc-classe">Selecione uma especialidade para visualizar as diretrizes.</div>

            <h2>MATRIZ DE PERÍCIAS</h2>
            <div class="pericia-grid" id="grid-pericias">
                </div>
        </div>

        <div id="aba-inventario" class="aba">
            <h2>EQUIPAMENTOS DE CAMPO</h2>
            <div class="form-add">
                <input type="text" id="item-nome" placeholder="Nome do Equipamento...">
                <input type="text" id="item-peso" placeholder="Peso/Espaço...">
                <button onclick="adicionarItem()" style="background:var(--green); border:none; padding:10px; width:100%; cursor:pointer; font-weight:bold;">ADICIONAR AO INVENTÁRIO</button>
            </div>
            <div id="lista-itens"></div>
        </div>

        <div id="aba-ressonancias" class="aba">
            <h2>RESSONÂNCIAS (PODERES)</h2>
            <div class="form-add">
                <input type="text" id="res-nome" placeholder="Nome da Ressonância...">
                <textarea id="res-efeito" placeholder="Efeito da distorção da realidade..."></textarea>
                <button onclick="adicionarRessonancia()" style="background:var(--purple); border:none; padding:10px; width:100%; color:white; cursor:
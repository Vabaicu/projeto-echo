<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>C.R.I.S. // DATABASE V3</title>
    <style>
        :root { --green: #33ff66; --blue: #3399ff; --purple: #a033ff; --orange: #ff9933; --red: #ff4444; --bg: #050505; }
        body { background: var(--bg); color: #eee; font-family: 'Courier New', monospace; margin: 0; overflow-x: hidden; }
        
        /* Layout Geral */
        nav { background: #000; border-bottom: 2px solid var(--green); padding: 15px; display: none; justify-content: center; position: sticky; top: 0; z-index: 100; gap: 10px; }
        nav button { background: #111; border: 1px solid #333; color: #888; padding: 10px; cursor: pointer; font-weight: bold; text-transform: uppercase; font-size: 0.7rem; }
        nav button.active { color: var(--green); border-color: var(--green); box-shadow: 0 0 10px var(--green); }

        .container { max-width: 800px; margin: 20px auto; padding: 15px; }
        .aba { display: none; background: #111; border: 1px solid #222; padding: 20px; animation: fadeIn 0.3s; }
        .aba.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* Tela de Seleção */
        .card-agente { background: #111; border: 1px solid #333; padding: 20px; margin-bottom: 15px; cursor: pointer; position: relative; display: flex; justify-content: space-between; align-items: center; }
        .card-agente:hover { border-color: var(--green); box-shadow: 0 0 10px rgba(51, 255, 102, 0.2); }
        .btn-delete-agente { background: var(--red); color: white; border: none; padding: 8px; cursor: pointer; font-weight: bold; z-index: 10; }

        /* Ficha e Inputs */
        h2 { color: var(--green); border-bottom: 1px solid #333; padding-bottom: 5px; font-size: 1rem; text-transform: uppercase; }
        input, select, textarea { background: #000; color: #fff; border: 1px solid #444; padding: 10px; width: 100%; box-sizing: border-box; margin-bottom: 10px; font-family: monospace; }
        
        /* Grid Perícias */
        .p-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 5px; }
        .p-item { display: flex; justify-content: space-between; align-items: center; background: #0a0a0a; padding: 5px 10px; border: 1px solid #222; font-size: 0.75rem; }
        .sel-p { background: #111; border: 1px solid #444; color: #666; width: 50px; text-align: center; font-weight: bold; }
        .p5 { color: var(--green); border-color: var(--green); }
        .p10 { color: var(--blue); border-color: var(--blue); }
        .p15 { color: var(--purple); border-color: var(--purple); }
        .p20 { color: var(--orange); border-color: var(--orange); }

        /* Ressonâncias */
        .res-sub-nav { display: flex; gap: 5px; margin-bottom: 15px; }
        .res-card { background: #000; border: 1px solid #333; padding: 15px; margin-bottom: 10px; border-left: 4px solid var(--purple); }
        .btn-add-res { background: var(--purple); color: white; border: none; padding: 5px 10px; cursor: pointer; width: 100%; margin-top: 5px; }
    </style>
</head>
<body>

    <section id="tela-inicial" class="container">
        <h1 style="color: var(--green); text-align: center; letter-spacing: 3px;">SISTEMA C.R.I.S.</h1>
        <div id="lista-agentes"></div>
        <button onclick="novoAgente()" style="width:100%; background:var(--green); color:black; border:none; padding:15px; font-weight:bold; cursor:pointer; margin-top:20px;">+ NOVO REGISTRO DE AGENTE</button>
    </section>

    <nav id="nav-main">
        <button onclick="irParaInicio()">Sair</button>
        <button id="n-fic" class="active" onclick="mudarAba('ficha')">Ficha</button>
        <button id="n-inv" onclick="mudarAba('inv')">Inventário</button>
        <button id="n-res" onclick="mudarAba('res')">Ressonâncias</button>
    </nav>

    <div class="container" id="painel-agente" style="display:none;">
        
        <div id="aba-ficha" class="aba active">
            <h2>Identificação</h2>
            <input type="text" id="f-nome" placeholder="NOME DO AGENTE" oninput="save()">
            <select id="f-ner" onchange="save()">
                <option value="5">N.E.R. 05%</option><option value="25">N.E.R. 25%</option><option value="50">N.E.R. 50%</option><option value="99">N.E.R. 99%</option>
            </select>
            <h2>Perícias</h2>
            <div class="p-grid" id="p-grid-container"></div>
        </div>

        <div id="aba-inv" class="aba">
            <h2>Novo Item</h2>
            <input type="text" id="i-nome"